suite: role binding tests

templates:
  - rolebinding.yaml

tests:
  - it: should create a RoleBinding with the correct name with EKS IAM role
    set:
      roleBindingName: "kubechecks-test-rolebinding-rbac"
      eks:
        iamRoleArn: "arn:aws:iam::123456789012:role/example-role"
    asserts:
      - isKind:
          of: RoleBinding
      - equal:
          path: metadata.name
          value: kubechecks-test-rolebinding-rbac

  - it: should create a RoleBinding with the correct name with self-managed service account
    set:
      roleBindingName: "kubechecks-test-rolebinding-rbac2"
      selfManaged:
        serviceAccountName: "kubecheck-sa"
    asserts:
      - isKind:
          of: RoleBinding
      - equal:
          path: metadata.name
          value: kubechecks-test-rolebinding-rbac2
